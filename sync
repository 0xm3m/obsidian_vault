#!/bin/bash

gstatus=`git status --porcelain`

if [ ${#gstatus} -ne 0 ]
then
    echo -e "\n[+]Printing Git Status \n";
    echo $gstatus;
    echo -e "\n[+]Adding Files to Push\n";
    git add --all;
    echo -e "\n[+]Commit Message\n";
    git commit -m "$gstatus";
    echo -e "\n[+]Pulling the branch \n";
    echo -e "\n[+]Enter the pull branch name: \n";
    read branch;
	git pull --rebase origin $branch;
    if [ $? -eq 0 ];
    then
        echo -e "\nGit pull was successful\n";
    else
        echo -e "\nGit pull failed!.\n";
    fi
    echo -e "\n[+]Pushing to branch main \n";
    echo -e "\n[+]Enter the push branch name: \n";
    read branch;
    git push -u origin $branch --force;
    if [ $? -eq 0 ];
    then
        echo -e "\nGit push was successful\n";
    else
        echo -e "\nGit push failed!.\n";
    fi
fi